

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OceanArray Project Structure &mdash; oceanarray v0.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=20758594" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=8b92e751"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            oceanarray
              <img src="_static/logo_template.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="processing_framework.html">OceanArray processing framework</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Methods for Instruments</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="methods/acquisition.html">Data Acquisition</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods/standardisation.html">Standardisation (Stage 1)</a></li>
<li class="toctree-l1"><a class="reference internal" href="clock_offset.html">Clock Offset Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods/trimming.html">Trim to Deployment (Stage 2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods/auto_qc.html">Automatic QC (Stage 3)</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods/calibration.html">Apply Calibration (Stage 4)</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods/conversion.html">Convert to OceanSites</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Methods for Moorings</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="methods/time_gridding.html">Grid in Time (Step 1)</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods/vertical_gridding.html">Grid Vertically (Step 2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods/concatenation.html">Combine Deployments (Step 3)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Methods for Array</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="methods/multisite_merging.html">Multi-site Merging</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="demo_instrument-output.html">Demo: Instrument-Level Processing (Compact Workflow)</a></li>
<li class="toctree-l1"><a class="reference internal" href="demo_mooring-output.html">Demo: mooring-level processing (Step 1)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help and reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="http://github.com/eleanorfrajka/oceanarray">GitHub Repo</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Development Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="oceanarray.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">oceanarray</span> <span class="pre">API</span></code></a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">oceanarray</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">OceanArray Project Structure</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/project_structure.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="oceanarray-project-structure">
<h1>OceanArray Project Structure<a class="headerlink" href="#oceanarray-project-structure" title="Link to this heading"></a></h1>
<p>This document provides an overview of the oceanarray codebase structure and organization.</p>
<hr class="docutils" />
<section id="project-structure-overview">
<h2>🔍 Project Structure Overview<a class="headerlink" href="#project-structure-overview" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>oceanarray/
├── oceanarray/                    # [core] Main Python package for oceanographic processing
│   ├── __init__.py                # [core] Makes this a Python package
│   ├── stage1.py                  # [core] Stage1: Raw data conversion to NetCDF (modern workflow)
│   ├── stage2.py                  # [core] Stage2: Clock corrections and trimming (modern workflow)
│   ├── time_gridding.py           # [core] Time gridding and mooring-level processing (modern workflow)
│   ├── clock_offset.py            # [core] Clock offset detection and correction analysis
│   ├── find_deployment.py         # [core] Deployment detection from temperature profiles
│   ├── readers.py                 # [core] Functions to read various oceanographic data formats
│   ├── writers.py                 # [core] Functions to write processed data to NetCDF
│   ├── rodb.py                    # [core] RODB format reader for legacy RAPID data
│   ├── process_rodb.py            # [legacy] Legacy RODB instrument processing functions
│   ├── mooring_rodb.py            # [legacy] Legacy RODB mooring-level processing functions
│   ├── tools.py                   # [core] Core utilities (lag correlation, QC functions)
│   ├── convertOS.py               # [format] OceanSites format conversion utilities
│   ├── plotters.py                # [viz] Data visualization and plotting functions
│   ├── rapid_interp.py            # [interp] Physics-based vertical interpolation
│   ├── transports.py              # [analysis] Transport calculations (work in progress)
│   ├── logger.py                  # [core] Structured logging configuration
│   ├── utilities.py               # [core] General helper functions
│   └── config/                    # [config] Configuration files for processing
│       ├── OS1_var_names.yaml     # [config] OceanSites variable name mappings
│       ├── OS1_vocab_attrs.yaml   # [config] OceanSites vocabulary attributes
│       ├── OS1_sensor_attrs.yaml  # [config] OceanSites sensor attributes
│       └── project_RAPID.yaml     # [config] RAPID project configuration
│
├── tests/                         # [test] Unit tests using pytest
│   ├── test_stage1.py             # [test] Test Stage1 processing
│   ├── test_stage2.py             # [test] Test Stage2 processing
│   ├── test_rodb.py               # [test] Test RODB data reading
│   ├── test_process_rodb.py       # [test] Test legacy RODB processing functions
│   ├── test_mooring_rodb.py       # [test] Test legacy RODB mooring functions
│   ├── test_tools.py              # [test] Test core utility functions
│   ├── test_convertOS.py          # [test] Test OceanSites conversion
│   └── ...
│
├── notebooks/                     # [demo] Processing demonstration notebooks
│   ├── demo_stage1.ipynb          # [demo] Stage1 processing demo
│   ├── demo_stage2.ipynb          # [demo] Stage2 processing demo
│   ├── demo_step1.ipynb           # [demo] Time gridding (mooring-level) demo
│   ├── demo_instrument.ipynb      # [demo] Compact instrument processing workflow
│   ├── demo_clock_offset.ipynb    # [demo] Clock offset analysis (refactored)
│   ├── demo_check_clock.ipynb     # [demo] Clock offset analysis (original)
│   ├── demo_instrument_rdb.ipynb  # [demo] Legacy RODB instrument processing
│   ├── demo_mooring_rdb.ipynb     # [demo] Legacy RODB mooring processing
│   ├── demo_batch_instrument.ipynb # [demo] Batch processing and QC analysis
│   └── demo_climatology.ipynb     # [demo] Climatological processing
│
├── docs/                          # [docs] Sphinx documentation
│   ├── source/                    # [docs] Documentation source files
│   │   ├── conf.py                # [docs] Sphinx configuration
│   │   ├── index.rst              # [docs] Main documentation page
│   │   ├── processing_framework.rst # [docs] Processing workflow documentation
│   │   ├── roadmap.rst            # [docs] Development roadmap
│   │   ├── methods/               # [docs] Method documentation
│   │   │   ├── standardisation.rst    # [docs] Stage1 standardization
│   │   │   ├── trimming.rst           # [docs] Stage2 trimming
│   │   │   ├── time_gridding.rst      # [docs] Time gridding methods
│   │   │   ├── clock_offset.rst       # [docs] Clock offset analysis
│   │   │   └── ...
│   │   └── _static/               # [docs] Static files (images, CSS)
│   └── Makefile                   # [docs] Build documentation
│
├── data/                          # [data] Sample and test data
│   ├── moor/                      # [data] Mooring data directory structure
│   │   ├── proc/                  # [data] Processed data
│   │   └── raw/                   # [data] Raw instrument files
│   └── climatology/               # [data] Climatological reference data
│
├── .github/                       # [ci] GitHub-specific workflows
│   ├── workflows/
│   │   ├── tests.yml              # [ci] Run pytest on pull requests
│   │   └── docs.yml               # [ci] Build documentation
│   └── ...
│
├── CLAUDE.md                      # [meta] Claude Code guidance file
├── .gitignore                     # [meta] Git ignore patterns
├── requirements.txt               # [meta] Core dependencies
├── requirements-dev.txt           # [meta] Development dependencies
├── .pre-commit-config.yaml        # [style] Pre-commit hooks configuration
├── pyproject.toml                 # [meta] Build system and project metadata
├── README.md                      # [meta] Project overview
└── LICENSE                        # [meta] MIT License
</pre></div>
</div>
</section>
<section id="architecture-overview">
<h2>🔍 Architecture Overview<a class="headerlink" href="#architecture-overview" title="Link to this heading"></a></h2>
<section id="modern-processing-workflow">
<h3>Modern Processing Workflow<a class="headerlink" href="#modern-processing-workflow" title="Link to this heading"></a></h3>
<p>The current recommended workflow uses:</p>
<ol class="arabic simple">
<li><p><strong>Stage1</strong> (<code class="docutils literal notranslate"><span class="pre">stage1.py</span></code>) - Format conversion from raw instrument files to CF-NetCDF</p></li>
<li><p><strong>Stage2</strong> (<code class="docutils literal notranslate"><span class="pre">stage2.py</span></code>) - Clock corrections and deployment period trimming</p></li>
<li><p><strong>Time Gridding</strong> (<code class="docutils literal notranslate"><span class="pre">time_gridding.py</span></code>) - Multi-instrument coordination and filtering</p></li>
<li><p><strong>Clock Offset Analysis</strong> (<code class="docutils literal notranslate"><span class="pre">clock_offset.py</span></code>) - Inter-instrument timing validation</p></li>
</ol>
</section>
<section id="legacy-rodb-workflow">
<h3>Legacy RODB Workflow<a class="headerlink" href="#legacy-rodb-workflow" title="Link to this heading"></a></h3>
<p>For RAPID/RODB format compatibility:</p>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">process_rodb.py</span></code></strong> - Individual instrument processing functions</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">mooring_rodb.py</span></code></strong> - Mooring-level stacking and filtering functions</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">rodb.py</span></code></strong> - RODB format data reader</p></li>
</ul>
</section>
<section id="key-design-principles">
<h3>Key Design Principles<a class="headerlink" href="#key-design-principles" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>CF-Compliant</strong>: Uses CF conventions for metadata and variable naming</p></li>
<li><p><strong>xarray-Based</strong>: Primary data structure throughout the pipeline</p></li>
<li><p><strong>Modular</strong>: Independent processing stages that can be run separately</p></li>
<li><p><strong>Configurable</strong>: YAML-driven configuration for processing parameters</p></li>
<li><p><strong>Reproducible</strong>: Comprehensive logging and processing history tracking</p></li>
</ul>
</section>
<section id="file-organization-tags">
<h3>File Organization Tags<a class="headerlink" href="#file-organization-tags" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[core]</span></code> - Essential processing functionality and utilities</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[legacy]</span></code> - RODB/RAPID legacy format compatibility functions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[demo]</span></code> - Example notebooks demonstrating workflows</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[test]</span></code> - Automated tests for functionality validation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[docs]</span></code> - Documentation sources and configuration</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[config]</span></code> - Processing configuration and parameter files</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[data]</span></code> - Sample data and directory structure examples</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[ci]</span></code> - Continuous integration and automation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[meta]</span></code> - Project metadata and development configuration</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="processing-stages">
<h2>🔧 Processing Stages<a class="headerlink" href="#processing-stages" title="Link to this heading"></a></h2>
<section id="stage-1-standardization">
<h3>Stage 1: Standardization<a class="headerlink" href="#stage-1-standardization" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Purpose</strong>: Convert raw instrument files to standardized NetCDF format</p></li>
<li><p><strong>Input</strong>: Raw files (<code class="docutils literal notranslate"><span class="pre">.cnv</span></code>, <code class="docutils literal notranslate"><span class="pre">.rsk</span></code>, <code class="docutils literal notranslate"><span class="pre">.dat</span></code>, <code class="docutils literal notranslate"><span class="pre">.mat</span></code>)</p></li>
<li><p><strong>Output</strong>: CF-compliant NetCDF files (<code class="docutils literal notranslate"><span class="pre">*_raw.nc</span></code>)</p></li>
<li><p><strong>Module</strong>: <code class="docutils literal notranslate"><span class="pre">stage1.py</span></code></p></li>
</ul>
</section>
<section id="stage-2-temporal-corrections">
<h3>Stage 2: Temporal Corrections<a class="headerlink" href="#stage-2-temporal-corrections" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Purpose</strong>: Apply clock corrections and trim to deployment periods</p></li>
<li><p><strong>Input</strong>: Stage1 files + YAML with clock offsets</p></li>
<li><p><strong>Output</strong>: Time-corrected files (<code class="docutils literal notranslate"><span class="pre">*_use.nc</span></code>)</p></li>
<li><p><strong>Module</strong>: <code class="docutils literal notranslate"><span class="pre">stage2.py</span></code></p></li>
</ul>
</section>
<section id="time-gridding-mooring-coordination">
<h3>Time Gridding: Mooring Coordination<a class="headerlink" href="#time-gridding-mooring-coordination" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Purpose</strong>: Combine instruments onto common time grids with optional filtering</p></li>
<li><p><strong>Input</strong>: Stage2 files from multiple instruments</p></li>
<li><p><strong>Output</strong>: Mooring-level combined datasets</p></li>
<li><p><strong>Module</strong>: <code class="docutils literal notranslate"><span class="pre">time_gridding.py</span></code></p></li>
</ul>
</section>
<section id="clock-offset-analysis">
<h3>Clock Offset Analysis<a class="headerlink" href="#clock-offset-analysis" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Purpose</strong>: Detect timing errors between instruments on same mooring</p></li>
<li><p><strong>Input</strong>: Stage1 files from multiple instruments</p></li>
<li><p><strong>Output</strong>: Recommended clock offset corrections for YAML</p></li>
<li><p><strong>Module</strong>: <code class="docutils literal notranslate"><span class="pre">clock_offset.py</span></code></p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="data-flow">
<h2>📊 Data Flow<a class="headerlink" href="#data-flow" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Raw Files → Stage1 → Stage2 → Time Gridding → Array Analysis
    ↓         ↓         ↓           ↓             ↓
  Various   *_raw.nc  *_use.nc   Combined     Transports
  Formats                        Mooring      &amp; Products
                                 Datasets
</pre></div>
</div>
<p><strong>Clock Offset Loop</strong>: Stage1 → Clock Analysis → Update YAML → Stage2</p>
</section>
<hr class="docutils" />
<section id="testing-structure">
<h2>🧪 Testing Structure<a class="headerlink" href="#testing-structure" title="Link to this heading"></a></h2>
<p>Tests are organized by module with comprehensive coverage:</p>
<ul class="simple">
<li><p><strong>Core workflow tests</strong>: <code class="docutils literal notranslate"><span class="pre">test_stage*.py</span></code></p></li>
<li><p><strong>Legacy format tests</strong>: <code class="docutils literal notranslate"><span class="pre">test_*_rodb.py</span></code></p></li>
<li><p><strong>Utility tests</strong>: <code class="docutils literal notranslate"><span class="pre">test_tools.py</span></code>, <code class="docutils literal notranslate"><span class="pre">test_convertOS.py</span></code></p></li>
<li><p><strong>Integration tests</strong>: Via demo notebooks in CI</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="documentation-structure">
<h2>📚 Documentation Structure<a class="headerlink" href="#documentation-structure" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong>Methods documentation</strong>: Detailed processing methodology</p></li>
<li><p><strong>API documentation</strong>: Auto-generated from docstrings</p></li>
<li><p><strong>Demo notebooks</strong>: Interactive examples and tutorials</p></li>
<li><p><strong>Development guides</strong>: Roadmap and contribution guidelines</p></li>
</ul>
<hr class="docutils" />
<p>This structure supports both modern CF-compliant processing workflows and legacy RAPID/RODB format compatibility, providing a flexible framework for oceanographic mooring data processing.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Eleanor Frajka-Williams, FirstName LastName.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>