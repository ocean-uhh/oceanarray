

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2. Trimming to Deployed period &mdash; oceanarray v0.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=20758594" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8b92e751"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3. Automatic QC flagging" href="auto_qc.html" />
    <link rel="prev" title="1. Standardisation (Internally-consistent format)" href="standardisation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            oceanarray
              <img src="../_static/logo_template.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../processing_framework.html">OceanArray processing framework</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Methods for Instruments</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="acquisition.html">Data Acquisition</a></li>
<li class="toctree-l1"><a class="reference internal" href="standardisation.html">Standardisation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Trim to Deployment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">1. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#purpose">2. Purpose</a></li>
<li class="toctree-l2"><a class="reference internal" href="#current-implementation-stage-2">3. Current Implementation (Stage 2)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#input-requirements">3.1. Input Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#processing-workflow">3.2. Processing Workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-format">3.3. Configuration Format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usage-example">3.4. Usage Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#output-format">4. Output Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#quality-control-and-error-handling">5. Quality Control and Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#integration-with-processing-chain">6. Integration with Processing Chain</a></li>
<li class="toctree-l2"><a class="reference internal" href="#historical-context-rapid-processing">7. Historical Context: RAPID Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#legacy-processing-scripts">8. Legacy Processing Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#implementation-notes">9. Implementation Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fair-considerations">10. FAIR Considerations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="auto_qc.html">Automatic QC</a></li>
<li class="toctree-l1"><a class="reference internal" href="calibration.html">Apply Calibration</a></li>
<li class="toctree-l1"><a class="reference internal" href="conversion.html">Convert to OceanSites</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Methods for Moorings</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="time_gridding.html">Step 1: Time Gridding and Optional Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="time_gridding.html#time-domain-filtering-details">7. Time-Domain Filtering Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="vertical_gridding.html">Grid Vertically</a></li>
<li class="toctree-l1"><a class="reference internal" href="concatenation.html">Concatenate Deployments</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Methods for Array</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="multisite_merging.html">Multi-site Merging</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../demo_instrument-output.html">Demo: instrument-level processing (Stage 1 and Stage 2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_mooring-output.html">Demo: mooring-level processing (Step 1)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help and reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="http://github.com/eleanorfrajka/oceanarray">GitHub Repo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oceanarray.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">oceanarray</span> <span class="pre">API</span></code></a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">oceanarray</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">2. Trimming to Deployed period</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/methods/trimming.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="trimming-to-deployed-period">
<h1>2. Trimming to Deployed period<a class="headerlink" href="#trimming-to-deployed-period" title="Link to this heading"></a></h1>
<p>This document outlines the <strong>trimming</strong> step in the oceanarray processing workflow. Trimming refers to the process of isolating the valid deployment period from a time series—typically corresponding to the interval between instrument deployment and recovery. This step also applies clock corrections and produces standardized NetCDF files ready for further processing.</p>
<p>This step may need to be run several times, adjusting the start and end of the deployment periods based on data inspection.</p>
<p>It corresponds to <strong>Stage 2</strong> from RAPID data processing and management, which uses as input the RDB format and outputs (in RDB format) the <cite>*.use</cite> file.  Here, we start with the Stage 1 output <cite>*_raw.nc</cite> files and produce <cite>*_use.nc</cite> files.</p>
<section id="overview">
<h2>1. Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>Raw mooring records often contain extraneous data before deployment or after recovery (e.g., deck recording, values during ascent/descent, post-recovery handling). These segments must be trimmed to retain only the time interval when the instrument was collecting valid in-situ measurements at the nominal depth during deployment. In this stage:</p>
<ul class="simple">
<li><p>Clock offsets are applied to correct instrument timing</p></li>
<li><p>Data is trimmed to deployment/recovery time windows</p></li>
<li><p>Unnecessary variables are removed</p></li>
<li><p>Metadata is enriched and standardized</p></li>
<li><p>Files are converted from <cite>*_raw.nc</cite> to <cite>*_use.nc</cite> format</p></li>
</ul>
</section>
<section id="purpose">
<h2>2. Purpose<a class="headerlink" href="#purpose" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Apply clock corrections to synchronize instrument times</p></li>
<li><p>Remove non-oceanographic data before deployment and after recovery</p></li>
<li><p>Ensure temporal consistency across instruments on the same mooring</p></li>
<li><p>Define the usable deployment interval for each instrument</p></li>
<li><p>Standardize file naming and metadata structure</p></li>
</ul>
</section>
<section id="current-implementation-stage-2">
<h2>3. Current Implementation (Stage 2)<a class="headerlink" href="#current-implementation-stage-2" title="Link to this heading"></a></h2>
<p>The trimming process is implemented in the <a class="reference internal" href="../oceanarray.html#module-oceanarray.stage2" title="oceanarray.stage2"><code class="xref py py-mod docutils literal notranslate"><span class="pre">oceanarray.stage2</span></code></a> module, which provides automated clock correction and temporal trimming for mooring datasets.</p>
<section id="input-requirements">
<h3>3.1. Input Requirements<a class="headerlink" href="#input-requirements" title="Link to this heading"></a></h3>
<p>The <a class="reference internal" href="../oceanarray.html#oceanarray.stage2.Stage2Processor" title="oceanarray.stage2.Stage2Processor"><code class="xref py py-class docutils literal notranslate"><span class="pre">oceanarray.stage2.Stage2Processor</span></code></a> class processes Stage 1 output files:</p>
<ul class="simple">
<li><p><strong>Raw NetCDF files</strong> (<cite>*_raw.nc</cite>): Standardized files from Stage 1 processing</p></li>
<li><p><strong>YAML configuration</strong>: Mooring metadata including deployment times and clock offsets</p></li>
<li><p><strong>Deployment windows</strong>: Start and end times for valid data periods</p></li>
</ul>
</section>
<section id="processing-workflow">
<h3>3.2. Processing Workflow<a class="headerlink" href="#processing-workflow" title="Link to this heading"></a></h3>
<p>The Stage 2 processing follows these steps:</p>
<ol class="arabic simple">
<li><p><strong>Configuration Loading</strong>: Read YAML files containing:
- Deployment and recovery timestamps
- Instrument-specific clock offsets
- Mooring location and metadata</p></li>
<li><p><strong>Clock Offset Application</strong>: Correct instrument timing by:
- Adding clock offset variables to datasets
- Shifting time coordinates by specified offset amounts
- Preserving original datasets (immutable processing)</p></li>
<li><p><strong>Temporal Trimming</strong>: Remove invalid data by:
- Trimming to deployment time window (if specified)
- Trimming to recovery time window (if specified)
- Handling missing or invalid time bounds gracefully</p></li>
<li><p><strong>Metadata Enrichment</strong>: Ensure complete metadata by:
- Adding missing instrument depth, serial number, type
- Preserving existing metadata without overwriting
- Maintaining provenance information</p></li>
<li><p><strong>Variable Cleanup</strong>: Remove unnecessary variables:
- Legacy time variables (e.g., <cite>timeS</cite>)
- Derived variables not needed for further processing</p></li>
<li><p><strong>NetCDF Output</strong>: Write processed files with:
- Updated filename suffix (<cite>*_use.nc</cite>)
- Optimized compression and chunking
- CF-compliant metadata structure</p></li>
</ol>
</section>
<section id="configuration-format">
<h3>3.3. Configuration Format<a class="headerlink" href="#configuration-format" title="Link to this heading"></a></h3>
<p>Clock offsets and deployment times are specified in YAML configuration:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mooring_name</span>
<span class="nt">deployment_time</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;2018-08-12T08:00:00&#39;</span>
<span class="nt">recovery_time</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;2018-08-26T20:47:24&#39;</span>
<span class="nt">instruments</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">instrument</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">microcat</span>
<span class="w">    </span><span class="nt">serial</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7518</span>
<span class="w">    </span><span class="nt">depth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">    </span><span class="nt">clock_offset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span><span class="w">  </span><span class="c1"># seconds</span>
</pre></div>
</div>
</section>
<section id="usage-example">
<h3>3.4. Usage Example<a class="headerlink" href="#usage-example" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">oceanarray.stage2</span><span class="w"> </span><span class="kn">import</span> <span class="n">Stage2Processor</span><span class="p">,</span> <span class="n">process_multiple_moorings_stage2</span>

<span class="c1"># Process a single mooring</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">Stage2Processor</span><span class="p">(</span><span class="s1">&#39;/path/to/data/&#39;</span><span class="p">)</span>
<span class="n">success</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">process_mooring</span><span class="p">(</span><span class="s1">&#39;mooring_name&#39;</span><span class="p">)</span>

<span class="c1"># Process multiple moorings</span>
<span class="n">moorings</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;mooring1&#39;</span><span class="p">,</span> <span class="s1">&#39;mooring2&#39;</span><span class="p">,</span> <span class="s1">&#39;mooring3&#39;</span><span class="p">]</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">process_multiple_moorings_stage2</span><span class="p">(</span><span class="n">moorings</span><span class="p">,</span> <span class="s1">&#39;/path/to/data/&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="output-format">
<h2>4. Output Format<a class="headerlink" href="#output-format" title="Link to this heading"></a></h2>
<p>The processed output includes:</p>
<ul class="simple">
<li><p><strong>Trimmed NetCDF files</strong> (<cite>*_use.nc</cite>) with:
- Time coordinates corrected for clock offsets
- Data restricted to deployment period
- Standardized metadata and variable structure
- Optimized storage format</p></li>
<li><p><strong>Processing logs</strong> with detailed information about:
- Clock offsets applied
- Trimming operations performed
- Data volume changes
- Error conditions encountered</p></li>
</ul>
<p>Example output structure:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="o">&gt;</span>
<span class="n">Dimensions</span><span class="p">:</span>        <span class="p">(</span><span class="n">time</span><span class="p">:</span> <span class="mi">8640</span><span class="p">)</span>  <span class="c1"># Trimmed from original 124619</span>
<span class="n">Coordinates</span><span class="p">:</span>
  <span class="o">*</span> <span class="n">time</span>           <span class="p">(</span><span class="n">time</span><span class="p">)</span> <span class="n">datetime64</span><span class="p">[</span><span class="n">ns</span><span class="p">]</span> <span class="mi">2018</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">12</span><span class="n">T08</span><span class="p">:</span><span class="mi">05</span><span class="p">:</span><span class="mi">00</span> <span class="o">...</span> <span class="mi">2018</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">26</span><span class="n">T19</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">00</span>
<span class="n">Data</span> <span class="n">variables</span><span class="p">:</span>
    <span class="n">temperature</span>    <span class="p">(</span><span class="n">time</span><span class="p">)</span> <span class="n">float32</span> <span class="o">...</span>
    <span class="n">salinity</span>       <span class="p">(</span><span class="n">time</span><span class="p">)</span> <span class="n">float32</span> <span class="o">...</span>
    <span class="n">pressure</span>       <span class="p">(</span><span class="n">time</span><span class="p">)</span> <span class="n">float32</span> <span class="o">...</span>
    <span class="n">serial_number</span>  <span class="n">int64</span> <span class="mi">7518</span>
    <span class="n">InstrDepth</span>     <span class="n">int64</span> <span class="mi">100</span>
    <span class="n">instrument</span>     <span class="o">&lt;</span><span class="n">U8</span> <span class="s1">&#39;microcat&#39;</span>
    <span class="n">clock_offset</span>   <span class="n">int64</span> <span class="mi">300</span>
<span class="n">Attributes</span><span class="p">:</span>
    <span class="n">mooring_name</span><span class="p">:</span>           <span class="n">test_mooring</span>
    <span class="n">deployment_time</span><span class="p">:</span>        <span class="mi">2018</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">12</span><span class="n">T08</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>
    <span class="n">recovery_time</span><span class="p">:</span>          <span class="mi">2018</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">26</span><span class="n">T20</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mi">24</span>
</pre></div>
</div>
</section>
<section id="quality-control-and-error-handling">
<h2>5. Quality Control and Error Handling<a class="headerlink" href="#quality-control-and-error-handling" title="Link to this heading"></a></h2>
<p>Stage 2 processing includes comprehensive quality control:</p>
<ul class="simple">
<li><p><strong>Time Range Validation</strong>: Ensures deployment/recovery times are reasonable</p></li>
<li><p><strong>Clock Offset Verification</strong>: Logs all timing corrections applied</p></li>
<li><p><strong>Data Completeness Checks</strong>: Warns when trimming results in empty datasets</p></li>
<li><p><strong>File Integrity</strong>: Validates input files before processing</p></li>
<li><p><strong>Graceful Degradation</strong>: Continues processing other instruments if one fails</p></li>
</ul>
<p>All processing activities are logged with timestamps for audit trails and debugging.</p>
</section>
<section id="integration-with-processing-chain">
<h2>6. Integration with Processing Chain<a class="headerlink" href="#integration-with-processing-chain" title="Link to this heading"></a></h2>
<p>Stage 2 processed files serve as input to subsequent processing steps:</p>
<ul class="simple">
<li><p><strong>Stage 3</strong>: Further quality control and calibration applications</p></li>
<li><p><strong>Later stages</strong>: <span class="xref std std-doc">filtering</span>, <span class="xref std std-doc">gridding</span>, <span class="xref std std-doc">stitching</span> for array products</p></li>
</ul>
<p>The consistent structure and timing corrections applied during Stage 2 ensure that downstream processing tools can operate reliably across different instrument types and deployments.</p>
</section>
<section id="historical-context-rapid-processing">
<h2>7. Historical Context: RAPID Processing<a class="headerlink" href="#historical-context-rapid-processing" title="Link to this heading"></a></h2>
<p>This trimming step evolved from the RAPID programme’s Stage 2 processing, which converted RDB format files from <cite>*.raw</cite> to <cite>*.use</cite> format. The modern implementation provides equivalent functionality with several improvements:</p>
<ul class="simple">
<li><p><strong>Automated Processing</strong>: Batch processing of multiple instruments and moorings</p></li>
<li><p><strong>Enhanced Metadata</strong>: Comprehensive provenance and quality control information</p></li>
<li><p><strong>Flexible Configuration</strong>: YAML-based configuration for easy modification</p></li>
<li><p><strong>Error Recovery</strong>: Robust handling of missing files and invalid configurations</p></li>
<li><p><strong>Modern Formats</strong>: NetCDF output with CF conventions for interoperability</p></li>
</ul>
</section>
<section id="legacy-processing-scripts">
<h2>8. Legacy Processing Scripts<a class="headerlink" href="#legacy-processing-scripts" title="Link to this heading"></a></h2>
<p>The original RAPID processing chain used MATLAB scripts for trimming operations:</p>
<ul class="simple">
<li><p><a class="reference external" href="../_static/code/microcat_raw2use_003.m">microcat_raw2use_003.m</a></p></li>
</ul>
<p>This script performed similar functions to the current Python implementation:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Excerpt from <cite>microcat_raw2use_003.m</cite></span><a class="headerlink" href="#id1" title="Link to this code"></a></div>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nb">clear</span>
<span class="linenos"> 2</span><span class="c">% basic preprocessing for microcat data</span>
<span class="linenos"> 3</span><span class="c">%   </span>
<span class="linenos"> 4</span><span class="c">% features</span>
<span class="linenos"> 5</span><span class="c">%      1. eliminate lauching and recovery period</span>
<span class="linenos"> 6</span><span class="c">%      2. save data to rodb file</span>
<span class="linenos"> 7</span><span class="c">%      3. create data overview sheet</span>
<span class="linenos"> 8</span><span class="c">%</span>
<span class="linenos"> 9</span><span class="c">% uses timeaxis.m, auto_filt.m, julian.m </span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="c">% 11.01.01 Kanzow </span>
<span class="linenos">12</span><span class="c">% 13.08.02 Kanzow : debugged</span>
<span class="linenos">13</span><span class="c">%</span>
<span class="linenos">14</span><span class="c">%      </span>
<span class="linenos">15</span><span class="w">  </span>
<span class="linenos">16</span><span class="c">% --- get mooring information from infofile </span>
<span class="linenos">17</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="n">moor</span><span class="w">          </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;ebm1_2_200736&#39;</span><span class="p">;</span><span class="w">    </span><span class="c">% Mooring name</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="n">operator</span><span class="w">      </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;wallace&#39;</span><span class="p">;</span>
<span class="linenos">22</span>
<span class="linenos">23</span><span class="n">plot_interval</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">2007</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="mi">07</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">   </span><span class="c">% start time of time axis on plot</span>
<span class="linenos">24</span><span class="w">		 </span><span class="mi">2008</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="mi">0</span><span class="p">];</span><span class="w">  </span><span class="c">% end time of time axis on plot</span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="n">mc_id</span><span class="w">    </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">333</span><span class="w"> </span><span class="mi">337</span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">         </span><span class="c">% microcat id</span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="c">%-- path</span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="c">% -- set path for data input and output</span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="c">% inpath  = [&#39;/data/rapid/cd170/moorings/&#39;,moor,&#39;/microcat/&#39;];</span>
<span class="linenos">33</span><span class="c">% outpath = [&#39;/data/rapid/cd170/moorings/&#39;,moor,&#39;/microcat/&#39;];</span>
<span class="linenos">34</span><span class="c">% infofile =[&#39;/data/rapid/cd170/moorings/&#39;,moor,&#39;/&#39;,moor,&#39;info.dat&#39;];</span>
<span class="linenos">35</span>
<span class="linenos">36</span><span class="n">inpath</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s">&#39;~/Data/rpdmoc/rapid/data/moor/proc/&#39;</span><span class="p">,</span><span class="n">moor</span><span class="p">,</span><span class="s">&#39;/microcat/&#39;</span><span class="p">];</span><span class="w"> </span><span class="c">% C Wallace changed paths for cruise d334</span>
<span class="linenos">37</span><span class="n">outpath</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s">&#39;~/Data/rpdmoc/rapid/data/moor/proc/&#39;</span><span class="p">,</span><span class="n">moor</span><span class="p">,</span><span class="s">&#39;/microcat/&#39;</span><span class="p">];</span>
<span class="linenos">38</span><span class="n">infofile</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s">&#39;~/Data/rpdmoc/rapid/data/moor/proc/&#39;</span><span class="p">,</span><span class="n">moor</span><span class="p">,</span><span class="s">&#39;/&#39;</span><span class="p">,</span><span class="n">moor</span><span class="p">,</span><span class="s">&#39;info.dat&#39;</span><span class="p">];</span>
</pre></div>
</div>
</div>
<p>The modern Python implementation in <a class="reference internal" href="../oceanarray.html#module-oceanarray.stage2" title="oceanarray.stage2"><code class="xref py py-mod docutils literal notranslate"><span class="pre">oceanarray.stage2</span></code></a> provides equivalent functionality with improved:</p>
<ul class="simple">
<li><p><strong>Scalability</strong>: Process multiple moorings and years of data efficiently</p></li>
<li><p><strong>Reproducibility</strong>: Automated processing with comprehensive logging</p></li>
<li><p><strong>Flexibility</strong>: Easy modification of deployment windows and clock offsets</p></li>
<li><p><strong>Integration</strong>: Seamless connection to subsequent processing stages</p></li>
</ul>
</section>
<section id="implementation-notes">
<h2>9. Implementation Notes<a class="headerlink" href="#implementation-notes" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong>Time Handling</strong>: All times are processed as UTC datetime64 objects for consistency</p></li>
<li><p><strong>Clock Corrections</strong>: Applied as integer second offsets to maintain precision</p></li>
<li><p><strong>Immutable Processing</strong>: Original datasets are preserved; all operations return new objects</p></li>
<li><p><strong>Flexible Trimming</strong>: Supports trimming by deployment time, recovery time, or both</p></li>
<li><p><strong>Batch Processing</strong>: Efficient processing of multiple instruments and moorings</p></li>
</ul>
</section>
<section id="fair-considerations">
<h2>10. FAIR Considerations<a class="headerlink" href="#fair-considerations" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong>Findable</strong>: Standardized file naming and metadata structure</p></li>
<li><p><strong>Accessible</strong>: NetCDF format with CF conventions for broad compatibility</p></li>
<li><p><strong>Interoperable</strong>: Consistent data structure across instruments and deployments</p></li>
<li><p><strong>Reusable</strong>: Comprehensive metadata and processing provenance</p></li>
</ul>
<p>Trimmed intervals and clock corrections are documented transparently in dataset attributes and processing logs to maintain full provenance.</p>
<p>See also: <a class="reference internal" href="../oceanarray.html"><span class="doc">oceanarray API</span></a>, <a class="reference internal" href="standardisation.html"><span class="doc">1. Standardisation (Internally-consistent format)</span></a>, <span class="xref std std-doc">filtering</span></p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="standardisation.html" class="btn btn-neutral float-left" title="1. Standardisation (Internally-consistent format)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="auto_qc.html" class="btn btn-neutral float-right" title="3. Automatic QC flagging" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Eleanor Frajka-Williams, FirstName LastName.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>