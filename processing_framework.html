

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OceanArray processing framework &mdash; oceanarray v0.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=20758594" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=8b92e751"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="0. Data Acquisition (Instrument-level processing)" href="methods/acquisition.html" />
    <link rel="prev" title="Oceanarray: Methods and Workflows for Mooring Array Processing" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            oceanarray
              <img src="_static/logo_template.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">OceanArray processing framework</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#stage-0-data-acquisition-download-in-proprietary-format">Stage 0 — Data Acquisition (Download in proprietary format)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#instrument-level-processing">Instrument-level processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mooring-level-processing">Mooring-level processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#array-level-processing-analysis">Array-level processing &amp; analysis</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#derived-fields-dynamic-height-and-shear">Derived Fields: Dynamic Height and Shear</a></li>
<li class="toctree-l2"><a class="reference internal" href="#velocity-based-transports">Velocity-Based Transports</a></li>
<li class="toctree-l2"><a class="reference internal" href="#composite-transport-and-mass-compensation">Composite Transport and Mass Compensation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#moc-time-series-and-diagnostics">MOC Time Series and Diagnostics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#summary-table">Summary Table</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Methods for Instruments</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="methods/acquisition.html">Data Acquisition</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods/standardisation.html">Standardisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods/trimming.html">Trim to Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods/calibration.html">Apply Calibration</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods/conversion.html">Convert to OceanSites</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Methods for Moorings</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="methods/filtering.html">Filter in Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods/gridding.html">Grid Vertically</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods/stitching.html">Stitch Deployments</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Methods for Array</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="methods/multisite_merging.html">Multi-site Merging</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help and reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="http://github.com/eleanorfrajka/oceanarray">GitHub Repo</a></li>
<li class="toctree-l1"><a class="reference internal" href="oceanarray.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">oceanarray</span> <span class="pre">API</span></code></a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">oceanarray</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">OceanArray processing framework</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/processing_framework.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="oceanarray-processing-framework">
<h1>OceanArray processing framework<a class="headerlink" href="#oceanarray-processing-framework" title="Link to this heading"></a></h1>
<p>This document outlines the modular stages required for processing data from moored instruments
into time series of meridional overturning circulation (MOC) transports. Each stage is defined
abstractly, with reference to typical workflows (e.g., RAPID) as examples, without prescribing
any specific implementation or intermediate format.</p>
<p><strong>Principles:</strong></p>
<ul class="simple">
<li><p><strong>Modular</strong>: Each stage has clearly defined inputs and outputs.</p></li>
<li><p><strong>Adaptable</strong>: While RAPID and similar projects guide the structure, this framework supports
different instrument types, platforms, and processing strategies.</p></li>
<li><p><strong>Reproducible</strong>: Every transformation step should be traceable, with logs, versioning, and metadata.</p></li>
<li><p><strong>Incremental</strong>: Intermediate outputs should be storable and reloadable for downstream processing.</p></li>
</ul>
<section id="stage-0-data-acquisition-download-in-proprietary-format">
<h2>Stage 0 — Data Acquisition (Download in proprietary format)<a class="headerlink" href="#stage-0-data-acquisition-download-in-proprietary-format" title="Link to this heading"></a></h2>
<p>The initial stage (stage 0) is downloading data from instruments in the manufacturer’s format, such as SeaBird <cite>.cnv</cite> files or ASCII logs. This stage is typically performed at sea as soon as a mooring is recovered and instruments are available.</p>
<section id="instrument-level-processing">
<h3>Instrument-level processing<a class="headerlink" href="#instrument-level-processing" title="Link to this heading"></a></h3>
<figure class="align-center" id="id1">
<img alt="Instrument-level processing workflow" src="_images/instrument_processing_v5.png" />
<figcaption>
<p><span class="caption-text">Instrument-level processing workflow.</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The instrument-level processing carries out 2 main steps:</p>
<ul class="simple">
<li><p>Removing the period prior to the “on the sea-bed” deployment period, i.e. when the moored instruments are sinking or rising.</p></li>
<li><p>Applying calibrations based on laboratory calibrations or the pre- and post-deployment calibration dips (when a microCAT is lowered on the CTD-rosette and compared with the CTD data).</p></li>
</ul>
<p>Additional corrections for clock drift or incorrectly set clocks can also be applied, but are not usually expected.</p>
<p>For the RAPID project, these processing steps are referred to as <strong>stage 1</strong> where data are loaded from raw and saved into the intermediate format RDB (as a <cite>*.raw</cite> file) without making any changes (see <a class="reference internal" href="methods/standardisation.html"><span class="doc">1. Standardisation (Internally-consistent format)</span></a>), and <strong>stage 2</strong> where the raw files are trimmed to the deployment period (see <a class="reference internal" href="methods/trimming.html"><span class="doc">2. Trimming to Deployed period</span></a>).  The step where calibrations are applied is outlined in the <a class="reference internal" href="methods/calibration.html"><span class="doc">3. Calibration (Instrument-level Corrections)</span></a> document, and produces a traceable record of the calibration corrections that were applied.</p>
<p>Note that determining the calibration corrections is a separate step, which is not part of the <cite>oceanarray</cite> processing framework.  The calibration corrections are typically determined by comparing the instrument data with a CTD profile taken at the same time, or by comparing the instrument data with a laboratory calibration.</p>
</section>
<section id="mooring-level-processing">
<h3>Mooring-level processing<a class="headerlink" href="#mooring-level-processing" title="Link to this heading"></a></h3>
<figure class="align-center" id="id2">
<img alt="Mooring-level processing workflow" src="_images/mooring_processing_v3.png" />
<figcaption>
<p><span class="caption-text">Mooring-level processing workflow.</span><a class="headerlink" href="#id2" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The previous steps (stage 0 to stage 3) are applied per instrument, per deployment. When multiple instruments are deployed on the same tall mooring, the next steps can be applied to produce a vertical profile of data.</p>
<ul class="simple">
<li><p><strong>Step 1: filtering</strong> removes high-frequency variability (e.g., tides) by applying a lowpass filter (for RAPID, a 2-day 6th order Butterworth filter) and subsamples the output to a standard interval (for RAPID, 12 hours). See <a class="reference internal" href="methods/filtering.html"><span class="doc">Filter &amp; Subsample Time Series</span></a> for details.</p></li>
<li><p><strong>Step 2: gridding</strong> vertically interpolates the filtered data onto a standard pressure grid (for RAPID, every 20 dbar), combining measurements from multiple instruments on the same mooring and interpolating between them using climatological data. See <a class="reference internal" href="methods/gridding.html"><span class="doc">Vertical Gridding</span></a> for details.</p></li>
</ul>
<p>The output from step 1 and 2 are saved to a datafile with one time-axis (12-hourly) and two vertical dimensions.  Filtered (but not gridded) data are stored per instrument  (e.g., <cite>N_LEVEL</cite>), and filtered and gridded data are stored on pressure (e.g., <cite>PRES</cite>).  This is because the filtered but not gridded data will be used in the merging of moorings between different locations on an array.</p>
<ul class="simple">
<li><p>Finally, <strong>Step 3: concatenation</strong> stitches together (in time) the gridded data from multiple mooring deployments at an individual x/y- or lat/lon-location to generate continuous time series of vertically-resolved data. See <a class="reference internal" href="methods/stitching.html"><span class="doc">Stitching Across Deployments</span></a> for details.</p></li>
</ul>
</section>
<section id="array-level-processing-analysis">
<h3>Array-level processing &amp; analysis<a class="headerlink" href="#array-level-processing-analysis" title="Link to this heading"></a></h3>
<figure class="align-center">
<img alt="Array-level processing workflow" src="_images/array_processing_v2.png" />
</figure>
<p>This step combines filtered (but <em>not</em> vertically gridded datasets) from multiple mooring sites located near the continental slope (e.g., WB2, WB3, WBH2) into a boundary profile. These sites, deployed across a sloping ocean boundary, improve coverage along the boundary (e.g., when WB2 ends at 3800 dbar, and WB3 at 4500 dbar). To produce a consistent time–depth matrix for dynamic height and overturning calculations, their records are already on a common time access, but stacked and sorted vertically at each time step.  This helps minimize data gaps and ensures smooth transitions across deployments. A final vertical regridding step (using the same method as the gridding for the individual mooring locations) fills missing levels and ensures regular spacing in pressure.  Note that this may not have any method to flag or identify possibly statically unstable profiles. The output is a consolidated mooring product for the boundary region, ready for use in transport diagnostics.</p>
</section>
</section>
<section id="derived-fields-dynamic-height-and-shear">
<h2>Derived Fields: Dynamic Height and Shear<a class="headerlink" href="#derived-fields-dynamic-height-and-shear" title="Link to this heading"></a></h2>
<p><strong>Description</strong>: TEOS-10 conversion, dynamic height, and shear.</p>
<p><strong>Actions</strong>:</p>
<ul class="simple">
<li><p>Convert to Absolute Salinity and Conservative Temp.</p></li>
<li><p>Compute dynamic height and geostrophic shear.</p></li>
</ul>
<p><strong>Inputs</strong>: T/S/P profiles, reference pressure</p>
<p><strong>Outputs</strong>: Dynamic height fields</p>
<p><strong>RAPID Analogy</strong>: <cite>gsw_geo_strf_dyn_height</cite></p>
</section>
<section id="velocity-based-transports">
<h2>Velocity-Based Transports<a class="headerlink" href="#velocity-based-transports" title="Link to this heading"></a></h2>
<p><strong>Description</strong>: Processing of WBW/ADCP data.</p>
<p><strong>Actions</strong>:</p>
<ul class="simple">
<li><p>Filter, vertically/horizontally interpolate.</p></li>
<li><p>Sum over depth × width.</p></li>
</ul>
<p><strong>Inputs</strong>: Velocity data + bathymetry</p>
<p><strong>Outputs</strong>: WBW transport fields</p>
<p><strong>RAPID Analogy</strong>: WBW/Johns et al. 2008</p>
</section>
<section id="composite-transport-and-mass-compensation">
<h2>Composite Transport and Mass Compensation<a class="headerlink" href="#composite-transport-and-mass-compensation" title="Link to this heading"></a></h2>
<p><strong>Description</strong>: Combine transports and ensure mass balance.</p>
<p><strong>Actions</strong>:</p>
<ul class="simple">
<li><p>Combine all components.</p></li>
<li><p>Hypsometric compensation.</p></li>
<li><p>Cumulative transports.</p></li>
</ul>
<p><strong>Inputs</strong>: Component transports + bathymetry</p>
<p><strong>Outputs</strong>: <cite>td_total</cite>, streamfunction</p>
<p><strong>RAPID Analogy</strong>: <cite>transports.m</cite>, <cite>stream2moc.m</cite></p>
</section>
<section id="moc-time-series-and-diagnostics">
<h2>MOC Time Series and Diagnostics<a class="headerlink" href="#moc-time-series-and-diagnostics" title="Link to this heading"></a></h2>
<p><strong>Description</strong>: Final diagnostics and time series generation.</p>
<p><strong>Actions</strong>:</p>
<ul class="simple">
<li><p>Compute overturning strength and depth.</p></li>
<li><p>Integrate layer transports (e.g. thermocline, NADW).</p></li>
<li><p>Apply final time filtering.</p></li>
</ul>
<p><strong>Outputs</strong>: MOC time series, diagnostics, plots</p>
<section id="summary-table">
<h3>Summary Table<a class="headerlink" href="#summary-table" title="Link to this heading"></a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Step</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>RAPID Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>Acquisition</p></td>
<td><p>Download raw instrument files (e.g., <cite>.cnv</cite>, <cite>.asc</cite>)</p></td>
<td><p>Stage 0</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Standardisation</p></td>
<td><p>Convert raw files to CF-netCDF with metadata</p></td>
<td><p>Stage 1 (RDB conversion)</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>Trimming &amp; QC</p></td>
<td><p>Restrict to deployment period, apply initial QC</p></td>
<td><p>Stage 2 (<cite>*.use</cite>)</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>Calibration</p></td>
<td><p>Apply CTD/lab-based corrections (salinity, pressure)</p></td>
<td><p>Post-cruise</p></td>
</tr>
<tr class="row-even"><td><p><strong>A</strong></p></td>
<td><p>Time Filtering</p></td>
<td><p>Remove tides, subsample time series</p></td>
<td><p><cite>auto_filt</cite></p></td>
</tr>
<tr class="row-odd"><td><p><strong>B</strong></p></td>
<td><p>Vertical Gridding</p></td>
<td><p>Interpolate onto standard pressure grid</p></td>
<td><p><cite>hydro_grid</cite>, <cite>con_tprof0</cite></p></td>
</tr>
<tr class="row-even"><td><p><strong>C</strong></p></td>
<td><p>Concatenation</p></td>
<td><p>Join deployments into continuous mooring records</p></td>
<td><p>Internal</p></td>
</tr>
<tr class="row-odd"><td><p><strong>D</strong></p></td>
<td><p>Boundary Merging</p></td>
<td><p>Merge multiple moorings (e.g., WB2–WB4) into slope profile</p></td>
<td><p>West, East, Marwest merged profiles</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Oceanarray: Methods and Workflows for Mooring Array Processing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="methods/acquisition.html" class="btn btn-neutral float-right" title="0. Data Acquisition (Instrument-level processing)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Eleanor Frajka-Williams, FirstName LastName.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>