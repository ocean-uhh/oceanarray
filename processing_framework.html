

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OceanArray processing framework &mdash; oceanarray v0.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=20758594" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=8b92e751"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="0. Data Acquisition (Instrument-level processing)" href="methods/acquisition.html" />
    <link rel="prev" title="Oceanarray: Methods and Workflows for Mooring Array Processing" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            oceanarray
              <img src="_static/logo_template.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">OceanArray processing framework</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#instrument-level-processing">Instrument-level processing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#stage-0-data-acquisition-download-in-proprietary-format">Stage 0 — Data Acquisition (Download in proprietary format)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stage-1-standardisation-raw-to-netcdf-format">Stage 1 — Standardisation (Raw to NetCDF format)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stage-2-trimming-to-deployment-period-netcdf-format">Stage 2 — Trimming to Deployment Period (NetCDF format)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stage-3-conversion-internal-to-oceansites-format">Stage 3 — Conversion (internal to OceanSites format)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mooring-level-processing">Mooring-level processing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#step-1-time-filtering-and-subsampling">Step 1 — Time Filtering and Subsampling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-2-vertical-interpolation-and-gridding">Step 2 — Vertical Interpolation and Gridding</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-3-concatenation-across-deployments">Step 3 — Concatenation Across Deployments</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#array-level-processing-analysis">Array-level processing &amp; analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#derived-fields-dynamic-height-and-shear">Derived Fields: Dynamic Height and Shear</a></li>
<li class="toctree-l3"><a class="reference internal" href="#velocity-based-transports">Velocity-Based Transports</a></li>
<li class="toctree-l3"><a class="reference internal" href="#composite-transport-and-mass-compensation">Composite Transport and Mass Compensation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#moc-time-series-and-diagnostics">MOC Time Series and Diagnostics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#summary-table">Summary Table</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Methods for Instruments</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="methods/acquisition.html">Data Acquisition</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods/standardisation.html">Standardisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods/trimming.html">Trim to Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods/calibration.html">Apply Calibration</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods/conversion.html">Convert to OceanSites</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Methods for Moorings</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="methods/filtering.html">Filter in Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods/gridding.html">Grid Vertically</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods/stitching.html">Stitch Deployments</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Methods for Array</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="methods/multisite_merging.html">Multi-site Merging</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Help and reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="http://github.com/eleanorfrajka/oceanarray">GitHub Repo</a></li>
<li class="toctree-l1"><a class="reference internal" href="oceanarray.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">oceanarray</span> <span class="pre">API</span></code></a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">oceanarray</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">OceanArray processing framework</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/processing_framework.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="oceanarray-processing-framework">
<h1>OceanArray processing framework<a class="headerlink" href="#oceanarray-processing-framework" title="Link to this heading"></a></h1>
<p>This document outlines the modular stages required for processing data from moored instruments
into time series of meridional overturning circulation (MOC) transports. Each stage is defined
abstractly, with reference to typical workflows (e.g., RAPID) as examples, without prescribing
any specific implementation or intermediate format.</p>
<p><strong>Principles:</strong></p>
<ul class="simple">
<li><p><strong>Modular</strong>: Each stage has clearly defined inputs and outputs.</p></li>
<li><p><strong>Adaptable</strong>: While RAPID and similar projects guide the structure, this framework supports
different instrument types, platforms, and processing strategies.</p></li>
<li><p><strong>Reproducible</strong>: Every transformation step should be traceable, with logs, versioning, and metadata.</p></li>
<li><p><strong>Incremental</strong>: Intermediate outputs should be storable and reloadable for downstream processing.</p></li>
</ul>
<section id="instrument-level-processing">
<h2>Instrument-level processing<a class="headerlink" href="#instrument-level-processing" title="Link to this heading"></a></h2>
<section id="stage-0-data-acquisition-download-in-proprietary-format">
<h3>Stage 0 — Data Acquisition (Download in proprietary format)<a class="headerlink" href="#stage-0-data-acquisition-download-in-proprietary-format" title="Link to this heading"></a></h3>
</section>
<section id="stage-1-standardisation-raw-to-netcdf-format">
<h3>Stage 1 — Standardisation (Raw to NetCDF format)<a class="headerlink" href="#stage-1-standardisation-raw-to-netcdf-format" title="Link to this heading"></a></h3>
<p><strong>Description</strong>: Initial transformation from manufacturer formats to NetCDF with consistent metadata and units.</p>
<p><strong>Actions</strong>:</p>
<ul class="simple">
<li><p>Load proprietary formats (e.g., .cnv, .asc).</p></li>
<li><p>Assign CF-compliant variable names and units.</p></li>
<li><p>Include deployment metadata (e.g., from YAML or cruise log).</p></li>
</ul>
<p><strong>Inputs</strong>: Instrument files, metadata YAML</p>
<p><strong>Outputs</strong>: One <cite>.nc</cite> file per instrument</p>
<p><strong>RAPID Analogy</strong>: Stage 0: Download, Stage 1: RDB conversion</p>
</section>
<section id="stage-2-trimming-to-deployment-period-netcdf-format">
<h3>Stage 2 — Trimming to Deployment Period (NetCDF format)<a class="headerlink" href="#stage-2-trimming-to-deployment-period-netcdf-format" title="Link to this heading"></a></h3>
<p><strong>Description</strong>: Restrict data to the deployment period and apply initial QC, flagging, and notes.</p>
<p><strong>Actions</strong>:</p>
<ul class="simple">
<li><p>Trim records to deployment window.</p></li>
<li><p>Flag bad records.</p></li>
<li><p>Generate QC logs.</p></li>
</ul>
<p><strong>Inputs</strong>: Raw <cite>.nc</cite> from Stage 1, deployment metadata</p>
<p><strong>Outputs</strong>: Trimmed <cite>.nc</cite> + QC logs</p>
<p><strong>RAPID Analogy</strong>: Stage 2: Conversion to <cite>.use</cite></p>
</section>
<section id="stage-3-conversion-internal-to-oceansites-format">
<h3>Stage 3 — Conversion (internal to OceanSites format)<a class="headerlink" href="#stage-3-conversion-internal-to-oceansites-format" title="Link to this heading"></a></h3>
<p><strong>Description</strong>: Apply sensor-specific corrections and refined QC using auxiliary data.</p>
<p><strong>Actions</strong>:</p>
<ul class="simple">
<li><p>Apply calibration offsets (e.g., from CTD-rosette dips).</p></li>
<li><p>Pressure corrections, salinity adjustments.</p></li>
<li><p>Flag remaining suspect data.</p></li>
</ul>
<p><strong>Inputs</strong>: Stage 2 output, calibration info</p>
<p><strong>Outputs</strong>: Calibrated <cite>.nc</cite> files</p>
</section>
</section>
<section id="mooring-level-processing">
<h2>Mooring-level processing<a class="headerlink" href="#mooring-level-processing" title="Link to this heading"></a></h2>
<section id="step-1-time-filtering-and-subsampling">
<h3>Step 1 — Time Filtering and Subsampling<a class="headerlink" href="#step-1-time-filtering-and-subsampling" title="Link to this heading"></a></h3>
<p><strong>Description</strong>: Remove high-frequency signals and optionally resample.</p>
<p><strong>Actions</strong>:</p>
<ul class="simple">
<li><p>Apply Butterworth filter (e.g., 2-day).</p></li>
<li><p>Subsample to 12-hourly.</p></li>
</ul>
<p><strong>Inputs</strong>: Stage 3 output</p>
<p><strong>Outputs</strong>: Filtered <cite>.nc</cite> files</p>
<p><strong>RAPID Analogy</strong>: <cite>auto_filt.m</cite></p>
</section>
<section id="step-2-vertical-interpolation-and-gridding">
<h3>Step 2 — Vertical Interpolation and Gridding<a class="headerlink" href="#step-2-vertical-interpolation-and-gridding" title="Link to this heading"></a></h3>
<p><strong>Description</strong>: Interpolate onto vertical pressure grid using multiple instruments from a deployment.</p>
<p><strong>Actions</strong>:</p>
<ul class="simple">
<li><p>Group by mooring.</p></li>
<li><p>Use climatology or ML to interpolate to e.g. 20 dbar grid.</p></li>
</ul>
<p><strong>Inputs</strong>: Filtered <cite>.nc</cite> files + gridding parameters</p>
<p><strong>Outputs</strong>: Gridded mooring <cite>.nc</cite> files</p>
<p><strong>RAPID Analogy</strong>: <cite>hydro_grid.m</cite>, <cite>con_tprof0.m</cite></p>
</section>
<section id="step-3-concatenation-across-deployments">
<h3>Step 3 — Concatenation Across Deployments<a class="headerlink" href="#step-3-concatenation-across-deployments" title="Link to this heading"></a></h3>
<p><strong>Description</strong>: Join data from multiple deployments to create continuous time series.</p>
<p><strong>Actions</strong>:</p>
<ul class="simple">
<li><p>Concatenate time series.</p></li>
<li><p>Smooth overlaps.</p></li>
</ul>
<p><strong>Inputs</strong>: Gridded deployments</p>
<p><strong>Outputs</strong>: Continuous mooring records</p>
</section>
</section>
<section id="array-level-processing-analysis">
<h2>Array-level processing &amp; analysis<a class="headerlink" href="#array-level-processing-analysis" title="Link to this heading"></a></h2>
<section id="derived-fields-dynamic-height-and-shear">
<h3>Derived Fields: Dynamic Height and Shear<a class="headerlink" href="#derived-fields-dynamic-height-and-shear" title="Link to this heading"></a></h3>
<p><strong>Description</strong>: TEOS-10 conversion, dynamic height, and shear.</p>
<p><strong>Actions</strong>:</p>
<ul class="simple">
<li><p>Convert to Absolute Salinity and Conservative Temp.</p></li>
<li><p>Compute dynamic height and geostrophic shear.</p></li>
</ul>
<p><strong>Inputs</strong>: T/S/P profiles, reference pressure</p>
<p><strong>Outputs</strong>: Dynamic height fields</p>
<p><strong>RAPID Analogy</strong>: <cite>gsw_geo_strf_dyn_height</cite></p>
</section>
<section id="velocity-based-transports">
<h3>Velocity-Based Transports<a class="headerlink" href="#velocity-based-transports" title="Link to this heading"></a></h3>
<p><strong>Description</strong>: Processing of WBW/ADCP data.</p>
<p><strong>Actions</strong>:</p>
<ul class="simple">
<li><p>Filter, vertically/horizontally interpolate.</p></li>
<li><p>Sum over depth × width.</p></li>
</ul>
<p><strong>Inputs</strong>: Velocity data + bathymetry</p>
<p><strong>Outputs</strong>: WBW transport fields</p>
<p><strong>RAPID Analogy</strong>: WBW/Johns et al. 2008</p>
</section>
<section id="composite-transport-and-mass-compensation">
<h3>Composite Transport and Mass Compensation<a class="headerlink" href="#composite-transport-and-mass-compensation" title="Link to this heading"></a></h3>
<p><strong>Description</strong>: Combine transports and ensure mass balance.</p>
<p><strong>Actions</strong>:</p>
<ul class="simple">
<li><p>Combine all components.</p></li>
<li><p>Hypsometric compensation.</p></li>
<li><p>Cumulative transports.</p></li>
</ul>
<p><strong>Inputs</strong>: Component transports + bathymetry</p>
<p><strong>Outputs</strong>: <cite>td_total</cite>, streamfunction</p>
<p><strong>RAPID Analogy</strong>: <cite>transports.m</cite>, <cite>stream2moc.m</cite></p>
</section>
<section id="moc-time-series-and-diagnostics">
<h3>MOC Time Series and Diagnostics<a class="headerlink" href="#moc-time-series-and-diagnostics" title="Link to this heading"></a></h3>
<p><strong>Description</strong>: Final diagnostics and time series generation.</p>
<p><strong>Actions</strong>:</p>
<ul class="simple">
<li><p>Compute overturning strength and depth.</p></li>
<li><p>Integrate layer transports (e.g. thermocline, NADW).</p></li>
<li><p>Apply final time filtering.</p></li>
</ul>
<p><strong>Outputs</strong>: MOC time series, diagnostics, plots</p>
</section>
</section>
<section id="summary-table">
<h2>Summary Table<a class="headerlink" href="#summary-table" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Stage</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>RAPID Equivalent</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Acquisition</p></td>
<td><p>Convert raw files to CF-netCDF</p></td>
<td><p>Stage 0–1</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Trimming &amp; QC</p></td>
<td><p>Restrict to deployment, flag issues</p></td>
<td><p>Stage 2</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Calibration</p></td>
<td><p>Apply corrections from CTD/benchmarks</p></td>
<td><p>Post-cruise</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Time Filter</p></td>
<td><p>Remove tides, resample</p></td>
<td><p><cite>auto_filt</cite></p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>Gridding</p></td>
<td><p>Interpolate to vertical grid</p></td>
<td><p><cite>hydro_grid</cite></p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>Concatenation</p></td>
<td><p>Merge deployments</p></td>
<td><p>Internal</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>Dynamic Height</p></td>
<td><p>Compute TEOS-10 dynamic heights</p></td>
<td><p><cite>MOC_code_v5.m</cite></p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>Velocity Transports</p></td>
<td><p>WBW/ADCP-derived profiles</p></td>
<td><p>Johns et al. 2008</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>Combine Transports</p></td>
<td><p>Sum and compensate</p></td>
<td><p><cite>transports.m</cite></p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>MOC Diagnostics</p></td>
<td><p>MOC time series &amp; layers</p></td>
<td><p>Final outputs</p></td>
</tr>
</tbody>
</table>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Oceanarray: Methods and Workflows for Mooring Array Processing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="methods/acquisition.html" class="btn btn-neutral float-right" title="0. Data Acquisition (Instrument-level processing)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Eleanor Frajka-Williams, FirstName LastName.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>